<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AK CREATION MOVIES</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #e50914;
            --secondary-color: #f5f5f5;
            --text-color: #333;
            --bg-color: #fff;
            --card-bg: #f8f8f8;
            --header-bg: rgba(0, 0, 0, 0.85);
            --footer-bg: #222;
            --transition: all 0.3s ease;
            --side-menu-width: 280px;
        }

        .dark-theme {
            --primary-color: #e50914;
            --secondary-color: #2c2c2c;
            --text-color: #f5f5f5;
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --header-bg: rgba(0, 0, 0, 0.95);
            --footer-bg: #000;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: var(--transition);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            background-image: url('https://images.unsplash.com/photo-1535016120720-40c646be5580?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            position: relative;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--header-bg);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            animation: fadeInDown 1s ease;
        }

        .logo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            overflow: hidden;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .site-title {
            font-size: 28px;
            font-weight: 700;
            color: white;
        }

        .site-title span {
            color: var(--primary-color);
        }

        /* Search Bar */
        .search-container {
            width: 100%;
            max-width: 500px;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 10px 20px;
            border-radius: 30px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        .search-box:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(229, 9, 20, 0.5);
        }

        /* Navigation Tabs */
        .tabs-container {
            margin: 20px 0;
            overflow-x: auto;
            white-space: nowrap;
            scrollbar-width: none;
        }

        .tabs-container::-webkit-scrollbar {
            display: none;
        }

        .tabs {
            display: inline-flex;
            gap: 10px;
            padding: 5px 0;
        }

        .tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            cursor: pointer;
            color: white;
            font-weight: 500;
            transition: var(--transition);
        }

        .tab.active, .tab:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(229, 9, 20, 0.3);
        }

        /* Movies Grid */
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .movie-card {
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            cursor: pointer;
            animation: fadeIn 0.5s ease;
        }

        .movie-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        /* Movie poster with 16:9 aspect ratio */
        .poster-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio (9 / 16 = 0.5625) */
            overflow: hidden;
        }

        .movie-poster {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .movie-title {
            padding: 15px 10px;
            font-weight: 600;
            text-align: center;
            color: var(--text-color);
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            line-height: 1.3;
        }

        /* Side Menu */
        .side-menu {
            position: fixed;
            top: 0;
            left: -280px;
            width: var(--side-menu-width);
            height: 100vh;
            background: var(--card-bg);
            z-index: 102;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        .side-menu.active {
            left: 0;
            width: 50%;
            max-width: 280px;
        }

        .side-menu-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 101;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .side-menu-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-color);
        }

        .side-menu-item {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            background: rgba(229, 9, 20, 0.1);
            cursor: pointer;
            transition: var(--transition);
        }

        .side-menu-item:hover {
            background: var(--primary-color);
            color: white;
            transform: translateX(5px);
        }

        .social-buttons {
            display: none;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
            animation: slideDown 0.5s ease;
        }

        .social-btn {
            padding: 10px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }

        .social-btn:hover {
            transform: translateX(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .social-btn.youtube {
            background: #FF0000;
        }

        .social-btn.tiktok {
            background: #000000;
        }

        .social-btn.website {
            background: #4285F4;
        }

        /* Movie Detail Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 103;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--bg-color);
            width: 90%;
            max-width: 800px;
            border-radius: 10px;
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: var(--transition);
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            color: white;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }

        /* Modal poster with 16:9 aspect ratio */
        .modal-poster-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            overflow: hidden;
        }

        .modal-poster {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-title {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .modal-info {
            margin-bottom: 20px;
            color: #777;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 20px;
            border-radius: 5px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .download-btn {
            background: var(--primary-color);
            color: white;
        }

        .watch-btn {
            background: #2ecc71;
            color: white;
        }

        .action-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .watch-box {
            margin-top: 20px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 10px;
        }

        .watch-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .watch-iframe {
            width: 100%;
            height: 400px;
            border: none;
            border-radius: 8px;
        }

        /* Video player styling */
        .video-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }

        .video-player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Loading indicator */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
        }

        /* Footer */
        footer {
            background: var(--footer-bg);
            color: white;
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .footer-logo {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .footer-logo span {
            color: var(--primary-color);
        }

        .copyright {
            margin-top: 10px;
            color: #aaa;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .side-menu.active {
                width: 80%;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-container {
                width: 100%;
                margin: 15px 0;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 15px;
            }
            
            .movie-title {
                font-size: 12px;
                padding: 10px 5px;
                height: 50px;
            }
            
            .modal-content {
                width: 95%;
            }
            
            .modal-actions {
                flex-direction: column;
            }
            
            .watch-iframe, .video-container {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Side Menu Toggle -->
    <div class="side-menu-toggle">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Side Menu -->
    <div class="side-menu">
        <div class="side-menu-close">
            <i class="fas fa-times"></i>
        </div>
        <div class="side-menu-item" id="request-movie">Request Movie</div>
        <div class="side-menu-item" id="media-item">Media</div>
        <div class="side-menu-item" id="theme-toggle">Change Theme</div>
        
        <div class="social-buttons" id="social-buttons">
            <a href="https://www.youtube.com" target="_blank" class="social-btn youtube">
                <i class="fab fa-youtube"></i> YouTube
            </a>
            <a href="https://www.tiktok.com" target="_blank" class="social-btn tiktok">
                <i class="fab fa-tiktok"></i> TikTok
            </a>
            <a href="https://www.akcreations.com" target="_blank" class="social-btn website">
                <i class="fas fa-globe"></i> Website
            </a>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo-container">
                <div class="logo">
                    <img src="https://cdn-icons-png.flaticon.com/512/3033/3033143.png" alt="AK Creations Logo">
                </div>
                <div class="site-title">AK <span>CREATION</span> MOVIES</div>
            </div>
            
            <div class="search-container">
                <input type="text" class="search-box" id="search-box" placeholder="Search for movies...">
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Navigation Tabs -->
        <div class="tabs-container">
            <div class="tabs">
                <div class="tab active" data-category="all">HOME</div>
                <div class="tab" data-category="sinhala-dubbed">SINHALA DUBBED</div>
                <div class="tab" data-category="sinhala-sub">WITH SINHALA SUB</div>
                <div class="tab" data-category="no-sub">WITHOUT SUB</div>
            </div>
        </div>

        <!-- Movies Grid -->
        <div class="movies-grid" id="movies-grid">
            <!-- Movie cards will be dynamically generated here -->
        </div>
    </div>

    <!-- Movie Detail Modal -->
    <div class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-close">
                    <i class="fas fa-times"></i>
                </div>
                <div class="modal-poster-container">
                    <img src="" alt="Movie Poster" class="modal-poster" id="modal-poster">
                </div>
            </div>
            <div class="modal-body">
                <h2 class="modal-title" id="modal-title">Movie Title</h2>
                <div class="modal-info" id="modal-info">
                    <p>Year: 2023</p>
                    <p>Genre: Action, Adventure</p>
                    <p>Duration: 2h 15m</p>
                    <p>Rating: 8.5/10</p>
                </div>
                <p id="modal-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                
                <div class="modal-actions">
                    <button class="action-btn download-btn" id="download-btn-1">
                        <i class="fas fa-download"></i> 1080P
                    </button>
                    <button class="action-btn download-btn" id="download-btn-2">
                        <i class="fas fa-download"></i> 720P
                    </button>
                    <button class="action-btn watch-btn" id="watch-btn">
                        <i class="fas fa-play"></i> Watch Online
                    </button>
                </div>
                
                <div class="watch-box" id="watch-box" style="display: none;">
                    <h3 class="watch-title">Watch Online</h3>
                    <div class="video-container" id="video-container">
                        <div class="loading" id="video-loading">Loading video...</div>
                        <video class="video-player" id="video-player" controls></video>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="footer-logo">AK <span>CREATIONS</span></div>
            <p>Your ultimate destination for movies</p>
            <p class="copyright">© 2025 AK Creations. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Movie data with categories
        const movies = [
            {
                id: 1,
                title: "Sonic The Hedgehog 2 Sinhala Dubbed",
                year: 2022,
                genre: "Action, Adventure, Animation",
                duration: "2h 2m",
                rating: "6.5/10",
                poster: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiywYP9K4jhb88M93yokLVUuJv6z4p21VPdFAMxUgrFQWXlKPecMkjLP-zkruoKBgd3lBM0O9xytCaqBYc95aPDkocJKzij3YIn-Y3AdM4tejnnhtSrzF3lMPrGwhGTIbBOfkq6KHfQZQ7Kdat9Qy-ssK3TNzR53McD1l2-LxQ0SYV1XKbszd4cS9S4/s1280/sonic%202%20sinhala%20dubbed-min.png",
                description: "Sonic the Hedgehog බලපු හැමෝම බලාගෙන හිටියේ ඒකේ දෙවෙනි කොටස එනකල් සුපුරුදු පරිදිම ලොකු ප්‍රේක්ෂක ආකර්ෂණයක් දිනාගන්න මේ චිත්‍රපටිය නිකුත් කරන්න කලින්ම පුළුවන් වුනා. ඒක තවත් වැඩි වුනා. මේක නරඹන්න පටන් ගත්තාම. ලෝකේ පුරාම මේ වෙනකොට ප්‍රදර්ශනය ආරම්භ කරලා මාසයක් විතර වුනත්. ආදායම ඩොලර් මිලියන 350කට ආසන්නයි කියලායි සඳහන් වෙන්නේ. රේටිං අතින් ගත්තාමත්, මේ ලිපිය ලියන කොට, IMDB 6.7, Rotten Tomatoes 68%, Metacritic 45%, Google Users 96% ලබාගෙන තිබ්බා.",
                category: "sinhala-dubbed",
                downloadLinks: [
                    "https://cloud.sinhalachr.workers.dev/14:/Sonic_the_Hedgehog_2_2022_1080p_WEBRip_pupilvideo_blogspot_com.mp4"
                ],
                watchLink: "https://cloud.sinhalachr.workers.dev/14:/Sonic_the_Hedgehog_2_2022_1080p_WEBRip_pupilvideo_blogspot_com.mp4"
            },
            {
                id: 2,
                title: "Jurassic World",
                year: 2015,
                genre: "Action, Adventure, Sci-Fi",
                duration: "2h 4m",
                rating: "7.0/10",
                poster: "https://images.unsplash.com/photo-1596727147705-61a532a659bd?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                description: "A new theme park, built on the original site of Jurassic Park, creates a genetically modified hybrid dinosaur, the Indominus Rex, which escapes containment and goes on a killing spree.",
                category: "sinhala-sub",
                downloadLinks: [
                    "https://example.com/download1",
                    "https://example.com/download2"
                ],
                watchLink: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
            },
            {
                id: 3,
                title: "Mad Max: Fury Road",
                year: 2015,
                genre: "Action, Adventure, Sci-Fi",
                duration: "2h",
                rating: "8.1/10",
                poster: "https://images.unsplash.com/photo-1585951236318-7bdb3e0a7c6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                description: "In a post-apocalyptic wasteland, a woman rebels against a tyrannical ruler in search for her homeland with the aid of a group of female prisoners, a psychotic worshiper, and a drifter named Max.",
                category: "no-sub",
                downloadLinks: [
                    "https://example.com/download1",
                    "https://example.com/download2"
                ],
                watchLink: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"
            },
            {
                id: 4,
                title: "The Dark Knight",
                year: 2008,
                genre: "Action, Crime, Drama",
                duration: "2h 32m",
                rating: "9.0/10",
                poster: "https://images.unsplash.com/photo-1509347528160-9a9e33742cdb?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                description: "When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice.",
                category: "sinhala-sub",
                downloadLinks: [
                    "https://example.com/download1",
                    "https://example.com/download2"
                ],
                watchLink: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4"
            },
            {
                id: 5,
                title: "Inception",
                year: 2010,
                genre: "Action, Adventure, Sci-Fi",
                duration: "2h 28m",
                rating: "8.8/10",
                poster: "https://images.unsplash.com/photo-1534447677768-be436bb09401?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                description: "A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O.",
                category: "no-sub",
                downloadLinks: [
                    "https://example.com/download1",
                    "https://example.com/download2"
                ],
                watchLink: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4"
            },
            {
                id: 6,
                title: "Avengers: Endgame",
                year: 2019,
                genre: "Action, Adventure, Drama",
                duration: "3h 1m",
                rating: "8.4/10",
                poster: "https://images.unsplash.com/photo-1635863138275-d9b33299680a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                description: "After the devastating events of Avengers: Infinity War, the universe is in ruins. With the help of remaining allies, the Avengers assemble once more in order to reverse Thanos' actions and restore balance to the universe.",
                category: "sinhala-dubbed",
                downloadLinks: [
                    "https://example.com/download1",
                    "https://example.com/download2"
                ],
                watchLink: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4"
            }
        ];

        // DOM Elements
        const moviesGrid = document.getElementById('movies-grid');
        const modal = document.querySelector('.modal');
        const modalClose = document.querySelector('.modal-close');
        const sideMenuToggle = document.querySelector('.side-menu-toggle');
        const sideMenu = document.querySelector('.side-menu');
        const sideMenuClose = document.querySelector('.side-menu-close');
        const themeToggle = document.getElementById('theme-toggle');
        const tabs = document.querySelectorAll('.tab');
        const searchBox = document.getElementById('search-box');
        const mediaItem = document.getElementById('media-item');
        const socialButtons = document.getElementById('social-buttons');
        const requestMovie = document.getElementById('request-movie');
        const videoPlayer = document.getElementById('video-player');
        const videoLoading = document.getElementById('video-loading');

        // Current category state
        let currentCategory = 'all';
        let filteredMovies = [...movies];
        let currentMovie = null;

        // Initialize
        function initialize() {
            // Load theme from localStorage
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
            }
            
            // Show all movies in HOME tab
            filteredMovies = movies;
            generateMovieCards(filteredMovies);
        }

        // Generate movie cards
        function generateMovieCards(moviesToShow) {
            moviesGrid.innerHTML = '';
            
            if (moviesToShow.length === 0) {
                moviesGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: white; font-size: 18px;">No movies found</p>';
                return;
            }
            
            moviesToShow.forEach(movie => {
                const movieCard = document.createElement('div');
                movieCard.classList.add('movie-card');
                movieCard.innerHTML = `
                    <div class="poster-container">
                        <img src="${movie.poster}" alt="${movie.title}" class="movie-poster">
                    </div>
                    <div class="movie-title">${movie.title}</div>
                `;
                movieCard.addEventListener('click', () => openMovieModal(movie));
                moviesGrid.appendChild(movieCard);
            });
        }

        // Filter movies by category
        function filterMoviesByCategory(category) {
            if (category === 'all') {
                return movies; // Show all movies in HOME tab
            }
            return movies.filter(movie => movie.category === category);
        }

        // Filter movies by search term
        function filterMoviesBySearch(term) {
            if (!term) {
                return filterMoviesByCategory(currentCategory);
            }
            
            return movies.filter(movie => 
                movie.title.toLowerCase().includes(term.toLowerCase()) || 
                movie.description.toLowerCase().includes(term.toLowerCase()) ||
                movie.genre.toLowerCase().includes(term.toLowerCase())
            );
        }

        // Open movie modal
        function openMovieModal(movie) {
            currentMovie = movie;
            const modalPoster = document.getElementById('modal-poster');
            const modalTitle = document.getElementById('modal-title');
            const modalInfo = document.getElementById('modal-info');
            const modalDescription = document.getElementById('modal-description');
            const downloadBtn1 = document.getElementById('download-btn-1');
            const downloadBtn2 = document.getElementById('download-btn-2');
            const watchBtn = document.getElementById('watch-btn');
            const watchBox = document.getElementById('watch-box');
            
            modalPoster.src = movie.poster;
            modalTitle.textContent = movie.title;
            modalInfo.innerHTML = `
                <p>Year: ${movie.year}</p>
                <p>Genre: ${movie.genre}</p>
                <p>Duration: ${movie.duration}</p>
                <p>Rating: ${movie.rating}</p>
            `;
            
            modalDescription.textContent = movie.description;
            
            // Set download links
            downloadBtn1.onclick = () => window.open(movie.downloadLinks[0], '_blank');
            if (movie.downloadLinks[1]) {
                downloadBtn2.style.display = 'flex';
                downloadBtn2.onclick = () => window.open(movie.downloadLinks[1], '_blank');
            } else {
                downloadBtn2.style.display = 'none';
            }
            
            // Set watch functionality
            watchBtn.onclick = () => {
                playMovie(movie);
            };
            
            watchBox.style.display = 'none';
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Play movie function
        function playMovie(movie) {
            const watchBox = document.getElementById('watch-box');
            const watchBtn = document.getElementById('watch-btn');
            
            // Show loading state
            watchBox.style.display = 'block';
            videoLoading.style.display = 'block';
            videoPlayer.style.display = 'none';
            
            // Set video source
            videoPlayer.src = movie.watchLink;
            
            // When video is loaded
            videoPlayer.onloadeddata = function() {
                videoLoading.style.display = 'none';
                videoPlayer.style.display = 'block';
                videoPlayer.play();
                
                // Update button text
                watchBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                watchBtn.onclick = () => pauseMovie();
            };
            
            // Handle video errors
            videoPlayer.onerror = function() {
                videoLoading.innerHTML = 'Error loading video. Please try again later.';
            };
        }

        // Pause movie function
        function pauseMovie() {
            const watchBtn = document.getElementById('watch-btn');
            
            if (videoPlayer.paused) {
                videoPlayer.play();
                watchBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                watchBtn.onclick = () => pauseMovie();
            } else {
                videoPlayer.pause();
                watchBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
                watchBtn.onclick = () => pauseMovie();
            }
        }

        // Close modal
        function closeModal() {
            const watchBox = document.getElementById('watch-box');
            const watchBtn = document.getElementById('watch-btn');
            
            // Reset video player
            videoPlayer.pause();
            videoPlayer.src = '';
            watchBox.style.display = 'none';
            
            // Reset watch button
            watchBtn.innerHTML = '<i class="fas fa-play"></i> Watch Online';
            watchBtn.onclick = () => playMovie(currentMovie);
            
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Toggle side menu
        function toggleSideMenu() {
            sideMenu.classList.toggle('active');
        }

        // Close side menu when clicking outside
        function closeSideMenuOnClickOutside(e) {
            if (sideMenu.classList.contains('active') && !e.target.closest('.side-menu') && !e.target.closest('.side-menu-toggle')) {
                sideMenu.classList.remove('active');
            }
        }

        // Toggle theme
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const isDark = document.body.classList.contains('dark-theme');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        // Toggle social buttons
        function toggleSocialButtons() {
            socialButtons.style.display = socialButtons.style.display === 'flex' ? 'none' : 'flex';
        }

        // Open request movie link
        function openRequestMovie() {
            window.open('https://forms.gle/example', '_blank');
        }

        // Event listeners
        modalClose.addEventListener('click', closeModal);
        sideMenuToggle.addEventListener('click', toggleSideMenu);
        sideMenuClose.addEventListener('click', toggleSideMenu);
        themeToggle.addEventListener('click', toggleTheme);
        mediaItem.addEventListener('click', toggleSocialButtons);
        requestMovie.addEventListener('click', openRequestMovie);
        document.addEventListener('click', closeSideMenuOnClickOutside);

        // Search functionality
        searchBox.addEventListener('input', (e) => {
            const searchTerm = e.target.value;
            filteredMovies = filterMoviesBySearch(searchTerm);
            generateMovieCards(filteredMovies);
        });

        // Tab switching
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                currentCategory = tab.getAttribute('data-category');
                filteredMovies = filterMoviesByCategory(currentCategory);
                generateMovieCards(filteredMovies);
            });
        });

        // Initialize
        initialize();

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>
